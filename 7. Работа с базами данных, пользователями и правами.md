
1.  Создайте новый кластер PostgresSQL 14
	
    sudo systemctl start postgresql@15-main
    sudo -u postgres pg_lsclusters
    
> 15  main    5432 online postgres /mnt/data/15/main /var/log/postgresql/postgresql-15-main.log

2.  Зайдите в созданный кластер под пользователем postgres
  
  sudo -u postgres psql

4.  Создайте новую базу данных testdb
	
	CREATE DATABASE testdb;
	
5.  Зайдите в созданную базу данных под пользователем postgres
	
	\c testdb
	
6.  Создайте новую схему testnm
	
	CREATE SCHEMA testnm;
	
7.  Создайте новую таблицу t1 с одной колонкой c1 типа integer

	CREATE TABLE t1(c1 integer);

8.  Вставьте строку со значением c1=1

	INSERT INTO t1 VALUES ('1');

9.  Создайте новую роль readonly

	CREATE ROLE readonly;

10.  Дайте новой роли право на подключение к базе данных testdb

	GRANT CONNECT ON DATABASE testdb TO readonly;

11.  Дайте новой роли право на использование схемы testnm

	GRANT USAGE ON SCHEMA testnm TO readonly;

12.  Дайте новой роли право на select для всех таблиц схемы testnm

	GRANT SELECT ON ALL TABLES IN SCHEMA testnm TO readonly;

13.  Создайте пользователя testread с паролем test123

	CREATE USER testread WITH PASSWORD 'test123';

14.  Дайте роль readonly пользователю testread

GRANT readonly TO testread;

14.  Зайдите под пользователем testread в базу данных testdb

	psql -U testread -h localhost -d testdb

15.  Сделайте select * from t1;
16.  Получилось? (могло если вы делали сами не по шпаргалке и не упустили один существенный момент про который позже)
17.  Напишите что именно произошло в тексте домашнего задания
18.  У вас есть идеи почему? ведь права то дали?
19.  Посмотрите на список таблиц
20.  Подсказка в шпаргалке под пунктом 20
21.  А почему так получилось с таблицей (если делали сами и без шпаргалки то может у вас все нормально)
22.  Вернитесь в базу данных testdb под пользователем postgres
23.  Удалите таблицу t1
24.  Создайте ее заново но уже с явным указанием имени схемы testnm
25.  Вставьте строку со значением c1=1
26.  Зайдите под пользователем testread в базу данных testdb
27.  Сделайте select * from testnm.t1;
28.  Получилось?
29.  Есть идеи почему? если нет - смотрите шпаргалку
30.  Как сделать так чтобы такое больше не повторялось? если нет идей - смотрите шпаргалку
31.  Сделайте select * from testnm.t1;
32.  Получилось?
33.  Есть идеи почему? если нет - смотрите шпаргалку
34.  Сделайте select * from testnm.t1;
35.  Получилось?
36.  Ура!
37.  Теперь попробуйте выполнить команду create table t2(c1 integer); insert into t2 values (2);
38.  А как так? нам же никто прав на создание таблиц и insert в них под ролью readonly?
39.  Есть идеи как убрать эти права? если нет - смотрите шпаргалку
40.  Если вы справились сами то расскажите что сделали и почему, если смотрели шпаргалку - объясните что сделали и почему выполнив указанные в ней команды
41.  Теперь попробуйте выполнить команду create table t3(c1 integer); insert into t2 values (2);
42.  Расскажите что получилось и почему
